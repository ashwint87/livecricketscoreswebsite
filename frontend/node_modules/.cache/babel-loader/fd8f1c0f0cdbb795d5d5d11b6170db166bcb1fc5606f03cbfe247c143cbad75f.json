{"ast":null,"code":"import React,{useEffect,useState,useRef}from'react';import{useParams}from'react-router-dom';import{getTossWinnerName,getTossDecision,matchStageName}from'./../utils/matchUtils';import MatchDetailTabs from'./MatchDetailTabs';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MatchDetail(){var _info$localteam,_info$visitorteam,_info$stage,_info$firstumpire,_info$secondumpire,_info$tvumpire,_info$referee,_info$venue,_info$manofmatch,_info$manofseries;const{id}=useParams();const[loading,setLoading]=useState(true);const[info,setInfo]=useState(null);const lastSuccessfulInfo=useRef(null);// Load cached match info (if any) from localStorage\nuseEffect(()=>{const cached=localStorage.getItem(\"match_\".concat(id));if(cached){const parsed=JSON.parse(cached);lastSuccessfulInfo.current=parsed;setInfo(parsed);// show cached immediately\n}},[id]);useEffect(()=>{const fetchMatchInfo=async()=>{setLoading(true);try{const res=await fetch(\"/api/match/\".concat(id));const data=await res.json();if(data!==null&&data!==void 0&&data.data){setInfo(data.data);lastSuccessfulInfo.current=data.data;localStorage.setItem(\"match_\".concat(id),JSON.stringify(data.data));}else{setInfo(lastSuccessfulInfo.current);}}catch(err){console.error('Error fetching match info:',err);setInfo(lastSuccessfulInfo.current);}finally{setLoading(false);}};fetchMatchInfo();},[id]);const formattedDate=input=>{if(!input)return'N/A';try{return new Date(input).toLocaleString();}catch(_unused){return'Invalid date';}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Match Detail\"}),loading&&!info&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}),(info===null||info===void 0?void 0:(_info$localteam=info.localteam)===null||_info$localteam===void 0?void 0:_info$localteam.name)&&(info===null||info===void 0?void 0:(_info$visitorteam=info.visitorteam)===null||_info$visitorteam===void 0?void 0:_info$visitorteam.name)&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Teams:\"}),\" \",info.localteam.name,\" vs \",info.visitorteam.name]}),(info===null||info===void 0?void 0:(_info$stage=info.stage)===null||_info$stage===void 0?void 0:_info$stage.name)&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Series:\"}),\" \",matchStageName(info)]}),(info===null||info===void 0?void 0:info.round)&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Match Round:\"}),\" \",info.round]}),(info===null||info===void 0?void 0:info.starting_at)&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Match Date & Time:\"}),\" \",formattedDate(info.starting_at)]}),(info===null||info===void 0?void 0:info.toss_won_team_id)&&(info===null||info===void 0?void 0:info.elected)&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Toss:\"}),\" \",getTossWinnerName(info),\" won the toss and elected to \",getTossDecision(info)]}),(info===null||info===void 0?void 0:(_info$firstumpire=info.firstumpire)===null||_info$firstumpire===void 0?void 0:_info$firstumpire.fullname)&&(info===null||info===void 0?void 0:(_info$secondumpire=info.secondumpire)===null||_info$secondumpire===void 0?void 0:_info$secondumpire.fullname)&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Umpires:\"}),\" \",info.firstumpire.fullname,\", \",info.secondumpire.fullname,(_info$tvumpire=info.tvumpire)!==null&&_info$tvumpire!==void 0&&_info$tvumpire.fullname?\", \".concat(info.tvumpire.fullname,\" (TV Umpire)\"):'']}),(info===null||info===void 0?void 0:(_info$referee=info.referee)===null||_info$referee===void 0?void 0:_info$referee.fullname)&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Match Referee:\"}),\" \",info.referee.fullname]}),(info===null||info===void 0?void 0:(_info$venue=info.venue)===null||_info$venue===void 0?void 0:_info$venue.name)&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Venue:\"}),\" \",info.venue.name,info.venue.city?\", \".concat(info.venue.city):'',info.venue.capacity?\" (Capacity: \".concat(info.venue.capacity,\")\"):'']}),(info===null||info===void 0?void 0:info.note)&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Match Status:\"}),\" \",info.note]}),(info===null||info===void 0?void 0:(_info$manofmatch=info.manofmatch)===null||_info$manofmatch===void 0?void 0:_info$manofmatch.fullname)&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Man of the Match:\"}),\" \",info.manofmatch.fullname]}),(info===null||info===void 0?void 0:(_info$manofseries=info.manofseries)===null||_info$manofseries===void 0?void 0:_info$manofseries.fullname)&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Man of the Series:\"}),\" \",info.manofseries.fullname]}),info&&/*#__PURE__*/_jsx(MatchDetailTabs,{matchId:id,matchInfo:info})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","useParams","getTossWinnerName","getTossDecision","matchStageName","MatchDetailTabs","jsx","_jsx","jsxs","_jsxs","MatchDetail","_info$localteam","_info$visitorteam","_info$stage","_info$firstumpire","_info$secondumpire","_info$tvumpire","_info$referee","_info$venue","_info$manofmatch","_info$manofseries","id","loading","setLoading","info","setInfo","lastSuccessfulInfo","cached","localStorage","getItem","concat","parsed","JSON","parse","current","fetchMatchInfo","res","fetch","data","json","setItem","stringify","err","console","error","formattedDate","input","Date","toLocaleString","_unused","children","localteam","name","visitorteam","stage","round","starting_at","toss_won_team_id","elected","firstumpire","fullname","secondumpire","tvumpire","referee","venue","city","capacity","note","manofmatch","manofseries","matchId","matchInfo"],"sources":["/Users/ashwin.r1/Downloads/live-cricket-scores-main/frontend/src/components/MatchDetail.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { getTossWinnerName, getTossDecision, matchStageName } from './../utils/matchUtils';\nimport MatchDetailTabs from './MatchDetailTabs';\n\nexport default function MatchDetail() {\n  const { id } = useParams();\n  const [loading, setLoading] = useState(true);\n  const [info, setInfo] = useState(null);\n  const lastSuccessfulInfo = useRef(null);\n\n  // Load cached match info (if any) from localStorage\n  useEffect(() => {\n    const cached = localStorage.getItem(`match_${id}`);\n    if (cached) {\n      const parsed = JSON.parse(cached);\n      lastSuccessfulInfo.current = parsed;\n      setInfo(parsed); // show cached immediately\n    }\n  }, [id]);\n\n  useEffect(() => {\n    const fetchMatchInfo = async () => {\n      setLoading(true);\n      try {\n        const res = await fetch(`/api/match/${id}`);\n        const data = await res.json();\n\n        if (data?.data) {\n          setInfo(data.data);\n          lastSuccessfulInfo.current = data.data;\n          localStorage.setItem(`match_${id}`, JSON.stringify(data.data));\n        } else {\n          setInfo(lastSuccessfulInfo.current);\n        }\n      } catch (err) {\n        console.error('Error fetching match info:', err);\n        setInfo(lastSuccessfulInfo.current);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchMatchInfo();\n  }, [id]);\n\n  const formattedDate = (input) => {\n    if (!input) return 'N/A';\n    try {\n      return new Date(input).toLocaleString();\n    } catch {\n      return 'Invalid date';\n    }\n  };\n\n  return (\n    <div>\n      <h1>Match Detail</h1>\n\n      {loading && !info && <p>Loading...</p>}\n\n      {info?.localteam?.name && info?.visitorteam?.name && (\n        <p><strong>Teams:</strong> {info.localteam.name} vs {info.visitorteam.name}</p>\n      )}\n      {info?.stage?.name && (\n        <p><strong>Series:</strong> {matchStageName(info)}</p>\n      )}\n      {info?.round && (\n        <p><strong>Match Round:</strong> {info.round}</p>\n      )}\n      {info?.starting_at && (\n        <p><strong>Match Date & Time:</strong> {formattedDate(info.starting_at)}</p>\n      )}\n      {info?.toss_won_team_id && info?.elected && (\n        <p><strong>Toss:</strong> {getTossWinnerName(info)} won the toss and elected to {getTossDecision(info)}</p>\n      )}\n      {info?.firstumpire?.fullname && info?.secondumpire?.fullname && (\n        <p><strong>Umpires:</strong> {info.firstumpire.fullname}, {info.secondumpire.fullname}{info.tvumpire?.fullname ? `, ${info.tvumpire.fullname} (TV Umpire)` : ''}</p>\n      )}\n      {info?.referee?.fullname && (\n        <p><strong>Match Referee:</strong> {info.referee.fullname}</p>\n      )}\n      {info?.venue?.name && (\n        <p><strong>Venue:</strong> {info.venue.name}{info.venue.city ? `, ${info.venue.city}` : ''}{info.venue.capacity ? ` (Capacity: ${info.venue.capacity})` : ''}</p>\n      )}\n      {info?.note && (\n        <p><strong>Match Status:</strong> {info.note}</p>\n      )}\n      {info?.manofmatch?.fullname && (\n        <p><strong>Man of the Match:</strong> {info.manofmatch.fullname}</p>\n      )}\n      {info?.manofseries?.fullname && (\n        <p><strong>Man of the Series:</strong> {info.manofseries.fullname}</p>\n      )}\n\n      {info && <MatchDetailTabs matchId={id} matchInfo={info} />}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectSpread from\"/Users/ashwin.r1/Downloads/live-cricket-scores-main/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{useParams,Link}from'react-router-dom';import axios from'axios';import{useSeriesMatchList}from'./../../context/SeriesMatchListContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SeriesSquadsTab(){const{seriesId}=useParams();const{seriesMatches,loadingMatches}=useSeriesMatchList();const[teams,setTeams]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{if(loadingMatches||!seriesMatches.length)return;let isMounted=true;const seenTeams=new Map();const fetchSquads=async()=>{try{// ðŸ”´ FILTER ONLY MATCHES OF THE PRIMARY STAGE\nconst matchesToUse=seriesMatches.filter(m=>m.stage_id===parseInt(seriesId));for(const match of matchesToUse){const seasonId=match.season_id;const teamsToFetch=[match.localteam,match.visitorteam];for(const team of teamsToFetch){if(!seenTeams.has(team.id)){try{var _res$data,_res$data$data;const res=await axios.get(\"/api/teams/\".concat(team.id,\"/squad/\").concat(seasonId));const squadArray=((_res$data=res.data)===null||_res$data===void 0?void 0:(_res$data$data=_res$data.data)===null||_res$data$data===void 0?void 0:_res$data$data.squad)||[];seenTeams.set(team.id,_objectSpread(_objectSpread({},team),{},{squad:squadArray}));}catch(_unused){seenTeams.set(team.id,_objectSpread(_objectSpread({},team),{},{squad:[]}));}}}}if(isMounted)setTeams(Array.from(seenTeams.values()));}catch(err){console.error('Error loading squads',err);}finally{setLoading(false);}};fetchSquads();return()=>{isMounted=false;};},[seriesMatches,loadingMatches,seriesId]);return/*#__PURE__*/_jsx(\"div\",{children:loading||loadingMatches?/*#__PURE__*/_jsx(\"p\",{children:\"Loading squads...\"}):teams.map(team=>/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h4\",{children:team.name}),Array.isArray(team.squad)&&team.squad.map(player=>/*#__PURE__*/_jsxs(Link,{to:\"/player/\".concat(player.id),className:\"player-item\",target:\"_blank\",children:[/*#__PURE__*/_jsx(\"img\",{src:player.image_path||'https://i.imgur.com/O1RmJDa.jpg',alt:player.fullname,className:\"player-img\"}),/*#__PURE__*/_jsx(\"button\",{className:\"player-name-btn\",children:player.fullname})]},player.id))]},team.id))});}","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","axios","useSeriesMatchList","jsx","_jsx","jsxs","_jsxs","SeriesSquadsTab","seriesId","seriesMatches","loadingMatches","teams","setTeams","loading","setLoading","length","isMounted","seenTeams","Map","fetchSquads","matchesToUse","filter","m","stage_id","parseInt","match","seasonId","season_id","teamsToFetch","localteam","visitorteam","team","has","id","_res$data","_res$data$data","res","get","concat","squadArray","data","squad","set","_objectSpread","_unused","Array","from","values","err","console","error","children","map","style","marginBottom","name","isArray","player","to","className","target","src","image_path","alt","fullname"],"sources":["/Users/ashwin.r1/Downloads/live-cricket-scores-main/frontend/src/components/series/SeriesSquadsTab.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { useSeriesMatchList } from './../../context/SeriesMatchListContext';\n\nexport default function SeriesSquadsTab() {\n  const { seriesId } = useParams();\n  const { seriesMatches, loadingMatches } = useSeriesMatchList();\n  const [teams, setTeams] = useState([]);\n  const [loading, setLoading] = useState(true);\n\nuseEffect(() => {\n  if (loadingMatches || !seriesMatches.length) return;\n\n  let isMounted = true;\n  const seenTeams = new Map();\n\n  const fetchSquads = async () => {\n    try {\n      // ðŸ”´ FILTER ONLY MATCHES OF THE PRIMARY STAGE\n      const matchesToUse = seriesMatches.filter(m => m.stage_id === parseInt(seriesId));\n\n      for (const match of matchesToUse) {\n        const seasonId = match.season_id;\n        const teamsToFetch = [match.localteam, match.visitorteam];\n\n        for (const team of teamsToFetch) {\n          if (!seenTeams.has(team.id)) {\n            try {\n              const res = await axios.get(`/api/teams/${team.id}/squad/${seasonId}`);\n              const squadArray = res.data?.data?.squad || [];\n\n              seenTeams.set(team.id, {\n                ...team,\n                squad: squadArray,\n              });\n            } catch {\n              seenTeams.set(team.id, {\n                ...team,\n                squad: [],\n              });\n            }\n          }\n        }\n      }\n\n      if (isMounted) setTeams(Array.from(seenTeams.values()));\n    } catch (err) {\n      console.error('Error loading squads', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  fetchSquads();\n  return () => {\n    isMounted = false;\n  };\n}, [seriesMatches, loadingMatches, seriesId]);\n\n  return (\n    <div>\n      {(loading || loadingMatches) ? (\n        <p>Loading squads...</p>\n      ) : (\n        teams.map((team) => (\n          <div key={team.id} style={{ marginBottom: '20px' }}>\n            <h4>{team.name}</h4>\n            {Array.isArray(team.squad) && team.squad.map((player) => (\n            <Link to={`/player/${player.id}`} className=\"player-item\" key={player.id} target=\"_blank\">\n              <img\n                src={player.image_path || 'https://i.imgur.com/O1RmJDa.jpg'}\n                alt={player.fullname}\n                className=\"player-img\"\n              />\n              <button className=\"player-name-btn\">{player.fullname}</button>\n            </Link>\n            ))}\n          </div>\n        ))\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
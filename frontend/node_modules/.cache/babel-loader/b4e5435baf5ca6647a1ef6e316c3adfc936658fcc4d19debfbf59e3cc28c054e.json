{"ast":null,"code":"var _jsxFileName = \"/Users/ashwin.r1/Downloads/live-cricket-scores-main/frontend/src/context/RankingsContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useEffect, useMemo, useState, useCallback } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RankingsContext = /*#__PURE__*/createContext();\nconst apiGender = uiGender => (uiGender || 'mens').toLowerCase() === 'womens' ? 'women' : 'men';\nconst apiType = t => {\n  const up = String(t || 'T20I').toUpperCase();\n  return up === 'T20' ? 'T20I' : up; // normalize\n};\nexport const RankingsProvider = ({\n  children\n}) => {\n  _s();\n  const [rankings, setRankings] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [lastUpdated, setLastUpdated] = useState(null);\n  const fetchRankings = useCallback(async signal => {\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await fetch('/api/team-rankings', {\n        signal\n      });\n      if (!res.ok) throw new Error(`HTTP ${res.status}`);\n      const data = await res.json();\n      setRankings(Array.isArray(data === null || data === void 0 ? void 0 : data.data) ? data.data : []);\n      setLastUpdated(new Date());\n    } catch (err) {\n      if (err.name !== 'AbortError') {\n        console.error('Error fetching rankings:', err);\n        setError(err);\n      }\n    } finally {\n      if (!(signal !== null && signal !== void 0 && signal.aborted)) setLoading(false);\n    }\n  }, []);\n  useEffect(() => {\n    const ctrl = new AbortController();\n    fetchRankings(ctrl.signal);\n    return () => ctrl.abort();\n  }, [fetchRankings]);\n\n  // Fast lookup: index[gender]['T20I'|'ODI'|'TEST'] = block\n  const index = useMemo(() => {\n    const out = {\n      men: {},\n      women: {}\n    };\n    for (const r of rankings) {\n      const g = (r.gender || 'men').toLowerCase();\n      const t = apiType(r.type);\n      out[g][t] = r;\n    }\n    return out;\n  }, [rankings]);\n  const refresh = useCallback(() => {\n    const ctrl = new AbortController();\n    fetchRankings(ctrl.signal);\n    return () => ctrl.abort();\n  }, [fetchRankings]);\n\n  // Optional helpers exposed from context (so components don’t re-implement)\n  const getTeamsSorted = useCallback((type, uiGender = 'mens') => {\n    var _index$g, _index$g$t;\n    const g = apiGender(uiGender);\n    const t = apiType(type);\n    const teams = ((_index$g = index[g]) === null || _index$g === void 0 ? void 0 : (_index$g$t = _index$g[t]) === null || _index$g$t === void 0 ? void 0 : _index$g$t.team) || [];\n    return teams.filter(x => (x === null || x === void 0 ? void 0 : x.ranking) && x.ranking.position != null).sort((a, b) => a.ranking.position - b.ranking.position);\n  }, [index]);\n  const hasFormatForGender = useCallback((type, uiGender = 'mens') => {\n    var _index$g2, _index$g2$t;\n    const g = apiGender(uiGender);\n    const t = apiType(type);\n    const teams = ((_index$g2 = index[g]) === null || _index$g2 === void 0 ? void 0 : (_index$g2$t = _index$g2[t]) === null || _index$g2$t === void 0 ? void 0 : _index$g2$t.team) || [];\n    return teams.some(x => x === null || x === void 0 ? void 0 : x.ranking);\n  }, [index]);\n  return /*#__PURE__*/_jsxDEV(RankingsContext.Provider, {\n    value: {\n      rankings,\n      // raw array\n      index,\n      // fast lookup\n      loading,\n      error,\n      lastUpdated,\n      refresh,\n      // call from UI if needed\n      getTeamsSorted,\n      // convenience selectors\n      hasFormatForGender\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n_s(RankingsProvider, \"5Tm8PqZqs8q9HYrWaF80QS3u5z8=\");\n_c = RankingsProvider;\nexport const useRankings = () => {\n  _s2();\n  return useContext(RankingsContext);\n};\n_s2(useRankings, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"RankingsProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useMemo","useState","useCallback","jsxDEV","_jsxDEV","RankingsContext","apiGender","uiGender","toLowerCase","apiType","t","up","String","toUpperCase","RankingsProvider","children","_s","rankings","setRankings","loading","setLoading","error","setError","lastUpdated","setLastUpdated","fetchRankings","signal","res","fetch","ok","Error","status","data","json","Array","isArray","Date","err","name","console","aborted","ctrl","AbortController","abort","index","out","men","women","r","g","gender","type","refresh","getTeamsSorted","_index$g","_index$g$t","teams","team","filter","x","ranking","position","sort","a","b","hasFormatForGender","_index$g2","_index$g2$t","some","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useRankings","_s2","$RefreshReg$"],"sources":["/Users/ashwin.r1/Downloads/live-cricket-scores-main/frontend/src/context/RankingsContext.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useMemo, useState, useCallback } from 'react';\n\nconst RankingsContext = createContext();\n\nconst apiGender = (uiGender) =>\n  (uiGender || 'mens').toLowerCase() === 'womens' ? 'women' : 'men';\nconst apiType = (t) => {\n  const up = String(t || 'T20I').toUpperCase();\n  return up === 'T20' ? 'T20I' : up; // normalize\n};\n\nexport const RankingsProvider = ({ children }) => {\n  const [rankings, setRankings] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError]   = useState(null);\n  const [lastUpdated, setLastUpdated] = useState(null);\n\n  const fetchRankings = useCallback(async (signal) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await fetch('/api/team-rankings', { signal });\n      if (!res.ok) throw new Error(`HTTP ${res.status}`);\n      const data = await res.json();\n      setRankings(Array.isArray(data?.data) ? data.data : []);\n      setLastUpdated(new Date());\n    } catch (err) {\n      if (err.name !== 'AbortError') {\n        console.error('Error fetching rankings:', err);\n        setError(err);\n      }\n    } finally {\n      if (!signal?.aborted) setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    const ctrl = new AbortController();\n    fetchRankings(ctrl.signal);\n    return () => ctrl.abort();\n  }, [fetchRankings]);\n\n  // Fast lookup: index[gender]['T20I'|'ODI'|'TEST'] = block\n  const index = useMemo(() => {\n    const out = { men: {}, women: {} };\n    for (const r of rankings) {\n      const g = (r.gender || 'men').toLowerCase();\n      const t = apiType(r.type);\n      out[g][t] = r;\n    }\n    return out;\n  }, [rankings]);\n\n  const refresh = useCallback(() => {\n    const ctrl = new AbortController();\n    fetchRankings(ctrl.signal);\n    return () => ctrl.abort();\n  }, [fetchRankings]);\n\n  // Optional helpers exposed from context (so components don’t re-implement)\n  const getTeamsSorted = useCallback((type, uiGender = 'mens') => {\n    const g = apiGender(uiGender);\n    const t = apiType(type);\n    const teams = index[g]?.[t]?.team || [];\n    return teams\n      .filter((x) => x?.ranking && x.ranking.position != null)\n      .sort((a, b) => a.ranking.position - b.ranking.position);\n  }, [index]);\n\n  const hasFormatForGender = useCallback((type, uiGender = 'mens') => {\n    const g = apiGender(uiGender);\n    const t = apiType(type);\n    const teams = index[g]?.[t]?.team || [];\n    return teams.some((x) => x?.ranking);\n  }, [index]);\n\n  return (\n    <RankingsContext.Provider\n      value={{\n        rankings,           // raw array\n        index,              // fast lookup\n        loading,\n        error,\n        lastUpdated,\n        refresh,            // call from UI if needed\n        getTeamsSorted,     // convenience selectors\n        hasFormatForGender,\n      }}\n    >\n      {children}\n    </RankingsContext.Provider>\n  );\n};\n\nexport const useRankings = () => useContext(RankingsContext);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
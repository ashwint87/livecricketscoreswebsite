{"ast":null,"code":"var _jsxFileName = \"/Users/ashwin.r1/Downloads/live-cricket-scores-main/frontend/src/components/series/SeriesSquadsTab.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { useSeriesMatchList } from './../../context/SeriesMatchListContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SeriesSquadsTab() {\n  _s();\n  const {\n    seriesId\n  } = useParams();\n  const {\n    seriesMatches,\n    loadingMatches\n  } = useSeriesMatchList();\n  const [teams, setTeams] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    if (loadingMatches || !seriesMatches.length) return;\n    let isMounted = true;\n    const seenTeams = new Map();\n    const fetchSquads = async () => {\n      try {\n        // ðŸ”´ FILTER ONLY MATCHES OF THE PRIMARY STAGE\n        const matchesToUse = seriesMatches.filter(m => m.stage_id === parseInt(seriesId));\n        for (const match of matchesToUse) {\n          const seasonId = match.season_id;\n          const teamsToFetch = [match.localteam, match.visitorteam];\n          for (const team of teamsToFetch) {\n            if (!seenTeams.has(team.id)) {\n              try {\n                var _res$data, _res$data$data;\n                const res = await axios.get(`/api/teams/${team.id}/squad/${seasonId}`);\n                const squadArray = ((_res$data = res.data) === null || _res$data === void 0 ? void 0 : (_res$data$data = _res$data.data) === null || _res$data$data === void 0 ? void 0 : _res$data$data.squad) || [];\n                seenTeams.set(team.id, {\n                  ...team,\n                  squad: squadArray\n                });\n              } catch {\n                seenTeams.set(team.id, {\n                  ...team,\n                  squad: []\n                });\n              }\n            }\n          }\n        }\n        if (isMounted) setTeams(Array.from(seenTeams.values()));\n      } catch (err) {\n        console.error('Error loading squads', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchSquads();\n    return () => {\n      isMounted = false;\n    };\n  }, [seriesMatches, loadingMatches, seriesId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: loading || loadingMatches ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading squads...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this) : teams.map(team => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: team.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this), Array.isArray(team.squad) && team.squad.map(player => /*#__PURE__*/_jsxDEV(Link, {\n        to: `/player/${player.id}`,\n        className: \"player-item\",\n        target: \"_blank\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: player.image_path || 'https://i.imgur.com/O1RmJDa.jpg',\n          alt: player.fullname,\n          className: \"player-img\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"player-name-btn\",\n          children: player.fullname\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 15\n        }, this)]\n      }, player.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this))]\n    }, team.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(SeriesSquadsTab, \"XALCACzR58RVDlZTfRTWm91Z0Ww=\", false, function () {\n  return [useParams, useSeriesMatchList];\n});\n_c = SeriesSquadsTab;\nvar _c;\n$RefreshReg$(_c, \"SeriesSquadsTab\");","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","axios","useSeriesMatchList","jsxDEV","_jsxDEV","SeriesSquadsTab","_s","seriesId","seriesMatches","loadingMatches","teams","setTeams","loading","setLoading","length","isMounted","seenTeams","Map","fetchSquads","matchesToUse","filter","m","stage_id","parseInt","match","seasonId","season_id","teamsToFetch","localteam","visitorteam","team","has","id","_res$data","_res$data$data","res","get","squadArray","data","squad","set","Array","from","values","err","console","error","children","fileName","_jsxFileName","lineNumber","columnNumber","map","style","marginBottom","name","isArray","player","to","className","target","src","image_path","alt","fullname","_c","$RefreshReg$"],"sources":["/Users/ashwin.r1/Downloads/live-cricket-scores-main/frontend/src/components/series/SeriesSquadsTab.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { useSeriesMatchList } from './../../context/SeriesMatchListContext';\n\nexport default function SeriesSquadsTab() {\n  const { seriesId } = useParams();\n  const { seriesMatches, loadingMatches } = useSeriesMatchList();\n  const [teams, setTeams] = useState([]);\n  const [loading, setLoading] = useState(true);\n\nuseEffect(() => {\n  if (loadingMatches || !seriesMatches.length) return;\n\n  let isMounted = true;\n  const seenTeams = new Map();\n\n  const fetchSquads = async () => {\n    try {\n      // ðŸ”´ FILTER ONLY MATCHES OF THE PRIMARY STAGE\n      const matchesToUse = seriesMatches.filter(m => m.stage_id === parseInt(seriesId));\n\n      for (const match of matchesToUse) {\n        const seasonId = match.season_id;\n        const teamsToFetch = [match.localteam, match.visitorteam];\n\n        for (const team of teamsToFetch) {\n          if (!seenTeams.has(team.id)) {\n            try {\n              const res = await axios.get(`/api/teams/${team.id}/squad/${seasonId}`);\n              const squadArray = res.data?.data?.squad || [];\n\n              seenTeams.set(team.id, {\n                ...team,\n                squad: squadArray,\n              });\n            } catch {\n              seenTeams.set(team.id, {\n                ...team,\n                squad: [],\n              });\n            }\n          }\n        }\n      }\n\n      if (isMounted) setTeams(Array.from(seenTeams.values()));\n    } catch (err) {\n      console.error('Error loading squads', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  fetchSquads();\n  return () => {\n    isMounted = false;\n  };\n}, [seriesMatches, loadingMatches, seriesId]);\n\n  return (\n    <div>\n      {(loading || loadingMatches) ? (\n        <p>Loading squads...</p>\n      ) : (\n        teams.map((team) => (\n          <div key={team.id} style={{ marginBottom: '20px' }}>\n            <h4>{team.name}</h4>\n            {Array.isArray(team.squad) && team.squad.map((player) => (\n            <Link to={`/player/${player.id}`} className=\"player-item\" key={player.id} target=\"_blank\">\n              <img\n                src={player.image_path || 'https://i.imgur.com/O1RmJDa.jpg'}\n                alt={player.fullname}\n                className=\"player-img\"\n              />\n              <button className=\"player-name-btn\">{player.fullname}</button>\n            </Link>\n            ))}\n          </div>\n        ))\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
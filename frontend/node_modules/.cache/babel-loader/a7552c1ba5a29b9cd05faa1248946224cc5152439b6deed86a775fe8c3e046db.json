{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{dismissalsToShowAsW}from'./../../constants/matchStatusConstants';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function OversSummaryTab(_ref){let{matchId,matchInfo}=_ref;const[balls,setBalls]=useState([]);const[innings,setInnings]=useState({});const matchData=matchInfo||{};const allBalls=matchData.balls||[];const grouped={};allBalls.forEach(ball=>{const inning=ball.scoreboard||'Inning';const over=Math.floor(ball.ball)+1;if(!grouped[inning])grouped[inning]={};if(!grouped[inning][over])grouped[inning][over]=[];grouped[inning][over].push(ball);});useEffect(()=>{var _matchInfo$balls;const cacheKey=\"overs_\".concat(matchId);if(matchInfo!==null&&matchInfo!==void 0&&(_matchInfo$balls=matchInfo.balls)!==null&&_matchInfo$balls!==void 0&&_matchInfo$balls.length){setInnings(grouped);setBalls(allBalls);try{const cacheData=JSON.stringify({grouped,allBalls});// Only cache if size is under 5MB (5000000 characters)\nif(cacheData.length<5000000){localStorage.setItem(cacheKey,cacheData);}else{console.warn(\"Cache too large, skipping localStorage.\");}}catch(e){if(e.name==='QuotaExceededError'){console.warn(\"Quota exceeded. Removing cache key only.\");localStorage.removeItem(cacheKey);}}}else{const cached=localStorage.getItem(cacheKey);if(cached){try{const parsed=JSON.parse(cached);setInnings(parsed.grouped);setBalls(parsed.allBalls);}catch(e){console.warn(\"Corrupted cache. Clearing it.\");localStorage.removeItem(cacheKey);}}}},[matchInfo,matchId]);const getBallDisplay=ball=>{var _ball$score,_ball$score$runs,_ball$score2;const name=(ball===null||ball===void 0?void 0:(_ball$score=ball.score)===null||_ball$score===void 0?void 0:_ball$score.name)||'';const runs=(_ball$score$runs=ball===null||ball===void 0?void 0:(_ball$score2=ball.score)===null||_ball$score2===void 0?void 0:_ball$score2.runs)!==null&&_ball$score$runs!==void 0?_ball$score$runs:'';if(dismissalsToShowAsW.includes(name))return'W';if(name===\"Retired Hurt\")return'RH';if(runs===0)return'0';if(runs===4)return'4';if(runs===6)return'6';return runs.toString();};const getTeamNameForScoreboard=scoreboardCode=>{var _matchData$batting,_matchData$localteam,_matchData$visitortea;if(!(matchData!==null&&matchData!==void 0&&(_matchData$batting=matchData.batting)!==null&&_matchData$batting!==void 0&&_matchData$batting.length))return scoreboardCode;const entry=matchData.batting.find(b=>b.scoreboard===scoreboardCode);const teamId=entry===null||entry===void 0?void 0:entry.team_id;if(teamId===matchData.localteam_id)return((_matchData$localteam=matchData.localteam)===null||_matchData$localteam===void 0?void 0:_matchData$localteam.name)||'Local Team';if(teamId===matchData.visitorteam_id)return((_matchData$visitortea=matchData.visitorteam)===null||_matchData$visitortea===void 0?void 0:_matchData$visitortea.name)||'Visitor Team';return\"Team \".concat(teamId);};if(!matchInfo)return/*#__PURE__*/_jsx(\"div\",{children:\"No overs summary available at the moment.\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"overs-summary-tab\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Overs Summary\"}),Object.entries(innings).map(_ref2=>{let[scoreboard,overs]=_ref2;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:getTeamNameForScoreboard(scoreboard)}),Object.keys(overs).sort((a,b)=>b-a).map(over=>{const ballsInOver=overs[over];return/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'10px'},children:[/*#__PURE__*/_jsxs(\"strong\",{children:[\"Over \",over,\":\"]}),' ',ballsInOver.map(ball=>/*#__PURE__*/_jsx(\"span\",{style:{marginRight:6},children:getBallDisplay(ball)},ball.id))]},over);})]},scoreboard);})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","dismissalsToShowAsW","jsx","_jsx","jsxs","_jsxs","OversSummaryTab","_ref","matchId","matchInfo","balls","setBalls","innings","setInnings","matchData","allBalls","grouped","forEach","ball","inning","scoreboard","over","Math","floor","push","_matchInfo$balls","cacheKey","concat","length","cacheData","JSON","stringify","localStorage","setItem","console","warn","e","name","removeItem","cached","getItem","parsed","parse","getBallDisplay","_ball$score","_ball$score$runs","_ball$score2","score","runs","includes","toString","getTeamNameForScoreboard","scoreboardCode","_matchData$batting","_matchData$localteam","_matchData$visitortea","batting","entry","find","b","teamId","team_id","localteam_id","localteam","visitorteam_id","visitorteam","children","className","Object","entries","map","_ref2","overs","keys","sort","a","ballsInOver","style","marginBottom","marginRight","id"],"sources":["/Users/ashwin.r1/Downloads/live-cricket-scores-main/frontend/src/components/match/OversSummaryTab.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { dismissalsToShowAsW } from './../../constants/matchStatusConstants';\n\nexport default function OversSummaryTab({ matchId, matchInfo }) {\n  const [balls, setBalls] = useState([]);\n  const [innings, setInnings] = useState({});\n\n  const matchData = matchInfo || {};\n  const allBalls = matchData.balls || [];\n  const grouped = {};\n\n  allBalls.forEach(ball => {\n    const inning = ball.scoreboard || 'Inning';\n    const over = Math.floor(ball.ball) + 1;\n\n    if (!grouped[inning]) grouped[inning] = {};\n    if (!grouped[inning][over]) grouped[inning][over] = [];\n\n    grouped[inning][over].push(ball);\n  });\n\nuseEffect(() => {\n  const cacheKey = `overs_${matchId}`;\n\n  if (matchInfo?.balls?.length) {\n    setInnings(grouped);\n    setBalls(allBalls);\n\n    try {\n      const cacheData = JSON.stringify({ grouped, allBalls });\n\n      // Only cache if size is under 5MB (5000000 characters)\n      if (cacheData.length < 5000000) {\n        localStorage.setItem(cacheKey, cacheData);\n      } else {\n        console.warn(\"Cache too large, skipping localStorage.\");\n      }\n    } catch (e) {\n      if (e.name === 'QuotaExceededError') {\n        console.warn(\"Quota exceeded. Removing cache key only.\");\n        localStorage.removeItem(cacheKey);\n      }\n    }\n  } else {\n    const cached = localStorage.getItem(cacheKey);\n    if (cached) {\n      try {\n        const parsed = JSON.parse(cached);\n        setInnings(parsed.grouped);\n        setBalls(parsed.allBalls);\n      } catch (e) {\n        console.warn(\"Corrupted cache. Clearing it.\");\n        localStorage.removeItem(cacheKey);\n      }\n    }\n  }\n}, [matchInfo, matchId]);\n\n  const getBallDisplay = (ball) => {\n    const name = ball?.score?.name || '';\n    const runs = ball?.score?.runs ?? '';\n\n    if (dismissalsToShowAsW.includes(name)) return 'W';\n    if (name === \"Retired Hurt\") return 'RH';\n    if (runs === 0) return '0';\n    if (runs === 4) return '4';\n    if (runs === 6) return '6';\n    return runs.toString();\n  };\n\n  const getTeamNameForScoreboard = (scoreboardCode) => {\n    if (!matchData?.batting?.length) return scoreboardCode;\n    const entry = matchData.batting.find(b => b.scoreboard === scoreboardCode);\n    const teamId = entry?.team_id;\n    if (teamId === matchData.localteam_id) return matchData.localteam?.name || 'Local Team';\n    if (teamId === matchData.visitorteam_id) return matchData.visitorteam?.name || 'Visitor Team';\n    return `Team ${teamId}`;\n  };\n\n  if (!matchInfo) return <div>No overs summary available at the moment.</div>;\n\n  return (\n    <div className=\"overs-summary-tab\">\n      <h3>Overs Summary</h3>\n\n      {Object.entries(innings).map(([scoreboard, overs]) => (\n        <div key={scoreboard}>\n          <h4>{getTeamNameForScoreboard(scoreboard)}</h4>\n          {Object.keys(overs)\n            .sort((a, b) => b - a)\n            .map(over => {\n              const ballsInOver = overs[over];\n\n              return (\n                <div key={over} style={{ marginBottom: '10px' }}>\n                  <strong>Over {over}:</strong>{' '}\n                  {ballsInOver.map(ball => (\n                    <span key={ball.id} style={{ marginRight: 6 }}>\n                      {getBallDisplay(ball)}\n                    </span>\n                  ))}\n                </div>\n              );\n            })}\n        </div>\n      ))}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
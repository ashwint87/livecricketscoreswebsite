{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{useTeams}from'./../../context/TeamsContext';import{useTeamsSquad}from'./../../context/TeamsSquadContext';import'./css/Players.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function TopPlayers(){const{filteredTeams,loading:teamsLoading}=useTeams();const[selectedTeamId,setSelectedTeamId]=useState(null);const[players,setPlayers]=useState([]);const[loadingPlayers,setLoadingPlayers]=useState(false);const{getTeamsSquad}=useTeamsSquad();const DEFAULT_TEAM_ID=10;// India\n// Sort teams with DEFAULT first, then limit to 13\nconst sortedTeams=filteredTeams.length>0?[...filteredTeams.filter(t=>t.id===DEFAULT_TEAM_ID),...filteredTeams.filter(t=>t.id!==DEFAULT_TEAM_ID)].slice(0,13):[];useEffect(()=>{if(sortedTeams.length>0&&!selectedTeamId){setSelectedTeamId(sortedTeams[0].id);}},[sortedTeams]);useEffect(()=>{if(!selectedTeamId)return;async function fetchPlayers(){try{setLoadingPlayers(true);const squad=await getTeamsSquad(selectedTeamId);const withSeasons=squad.filter(p=>{var _p$squad;return(_p$squad=p.squad)===null||_p$squad===void 0?void 0:_p$squad.season_id;});const topSeasons=[...new Set(withSeasons.map(p=>p.squad.season_id))].sort((a,b)=>b-a).slice(0,2);// latest 2 seasons\nconst latestSquad=withSeasons.filter(p=>topSeasons.includes(p.squad.season_id)).reduce((acc,player)=>{if(!acc.some(p=>p.id===player.id))acc.push(player);return acc;},[]).slice(0,6);// ✅ limit to 6 players\nsetPlayers(latestSquad);}catch(err){console.error('Failed to fetch players:',err);}finally{setLoadingPlayers(false);}}fetchPlayers();},[selectedTeamId]);return/*#__PURE__*/_jsxs(\"div\",{className:\"top-players-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top-players-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Players to Watch\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/player\",className:\"player-view-all-btn\",children:\"All\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"team-pill-row\",children:sortedTeams.map(team=>/*#__PURE__*/_jsxs(\"button\",{className:\"pill \".concat(team.id===selectedTeamId?'active':''),onClick:()=>setSelectedTeamId(team.id),children:[/*#__PURE__*/_jsx(\"img\",{src:team.image_path,alt:team.name,className:\"flag\"}),team.name]},team.id))}),loadingPlayers?/*#__PURE__*/_jsx(\"p\",{className:\"top-players-loading\",children:\"Loading players...\"}):/*#__PURE__*/_jsx(\"div\",{className:\"player-list\",children:players.map(player=>/*#__PURE__*/_jsxs(Link,{to:\"/player/\".concat(player.id),className:\"player-item\",target:\"_blank\",children:[/*#__PURE__*/_jsx(\"img\",{src:player.image_path||'https://i.imgur.com/O1RmJDa.jpg',alt:player.fullname,className:\"player-img\"}),/*#__PURE__*/_jsx(\"button\",{className:\"player-name-btn\",children:player.fullname})]},player.id))})]});}","map":{"version":3,"names":["React","useEffect","useState","Link","useTeams","useTeamsSquad","jsx","_jsx","jsxs","_jsxs","TopPlayers","filteredTeams","loading","teamsLoading","selectedTeamId","setSelectedTeamId","players","setPlayers","loadingPlayers","setLoadingPlayers","getTeamsSquad","DEFAULT_TEAM_ID","sortedTeams","length","filter","t","id","slice","fetchPlayers","squad","withSeasons","p","_p$squad","season_id","topSeasons","Set","map","sort","a","b","latestSquad","includes","reduce","acc","player","some","push","err","console","error","className","children","href","team","concat","onClick","src","image_path","alt","name","to","target","fullname"],"sources":["/Users/ashwin.r1/Downloads/live-cricket-scores-main/frontend/src/components/home/Players.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useTeams } from './../../context/TeamsContext';\nimport { useTeamsSquad } from './../../context/TeamsSquadContext';\nimport './css/Players.css';\n\nexport default function TopPlayers() {\n  const { filteredTeams, loading: teamsLoading } = useTeams();\n  const [selectedTeamId, setSelectedTeamId] = useState(null);\n  const [players, setPlayers] = useState([]);\n  const [loadingPlayers, setLoadingPlayers] = useState(false);\n  const { getTeamsSquad } = useTeamsSquad();\n\n  const DEFAULT_TEAM_ID = 10; // India\n\n  // Sort teams with DEFAULT first, then limit to 13\n  const sortedTeams = filteredTeams.length > 0\n    ? [\n        ...filteredTeams.filter(t => t.id === DEFAULT_TEAM_ID),\n        ...filteredTeams.filter(t => t.id !== DEFAULT_TEAM_ID),\n      ].slice(0, 13)\n    : [];\n\n  useEffect(() => {\n    if (sortedTeams.length > 0 && !selectedTeamId) {\n      setSelectedTeamId(sortedTeams[0].id);\n    }\n  }, [sortedTeams]);\n\n  useEffect(() => {\n    if (!selectedTeamId) return;\n\n    async function fetchPlayers() {\n      try {\n        setLoadingPlayers(true);\n        const squad = await getTeamsSquad(selectedTeamId);\n\n        const withSeasons = squad.filter(p => p.squad?.season_id);\n        const topSeasons = [...new Set(withSeasons.map(p => p.squad.season_id))]\n          .sort((a, b) => b - a)\n          .slice(0, 2); // latest 2 seasons\n\n        const latestSquad = withSeasons\n          .filter(p => topSeasons.includes(p.squad.season_id))\n          .reduce((acc, player) => {\n            if (!acc.some(p => p.id === player.id)) acc.push(player);\n            return acc;\n          }, [])\n          .slice(0, 6); // ✅ limit to 6 players\n\n        setPlayers(latestSquad);\n      } catch (err) {\n        console.error('Failed to fetch players:', err);\n      } finally {\n        setLoadingPlayers(false);\n      }\n    }\n\n    fetchPlayers();\n  }, [selectedTeamId]);\n\n  return (\n    <div className=\"top-players-container\">\n\n      <div className=\"top-players-header\">\n        <h2>Players to Watch</h2>\n        <a href=\"/player\" className=\"player-view-all-btn\">All</a>\n      </div>\n\n      <div className=\"team-pill-row\">\n        {sortedTeams.map(team => (\n          <button\n            key={team.id}\n            className={`pill ${team.id === selectedTeamId ? 'active' : ''}`}\n            onClick={() => setSelectedTeamId(team.id)}\n          >\n            <img src={team.image_path} alt={team.name} className=\"flag\" />\n            {team.name}\n          </button>\n        ))}\n      </div>\n\n      {loadingPlayers ? (\n        <p className=\"top-players-loading\">Loading players...</p>\n      ) : (\n        <div className=\"player-list\">\n          {players.map(player => (\n            <Link to={`/player/${player.id}`} className=\"player-item\" key={player.id} target=\"_blank\">\n              <img\n                src={player.image_path || 'https://i.imgur.com/O1RmJDa.jpg'}\n                alt={player.fullname}\n                className=\"player-img\"\n              />\n              <button className=\"player-name-btn\">{player.fullname}</button>\n            </Link>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
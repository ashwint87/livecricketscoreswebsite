{"ast":null,"code":"import React,{useEffect,useState,useRef}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function CommentaryTab(_ref){let{matchId,matchInfo}=_ref;const[commentaryByTeam,setCommentaryByTeam]=useState({});const cacheKey=\"commentary_\".concat(matchId);const cacheRef=useRef({});useEffect(()=>{var _matchInfo$balls;const cached=localStorage.getItem(cacheKey);if(cached){const parsed=JSON.parse(cached);cacheRef.current=parsed;setCommentaryByTeam(parsed);}if(!(matchInfo!==null&&matchInfo!==void 0&&(_matchInfo$balls=matchInfo.balls)!==null&&_matchInfo$balls!==void 0&&_matchInfo$balls.length))return;const teamMap={};matchInfo.balls.forEach(ball=>{var _ball$team;const teamName=((_ball$team=ball.team)===null||_ball$team===void 0?void 0:_ball$team.name)||'Unknown Team';const over=Math.floor(ball.ball)+1;if(!teamMap[teamName]){teamMap[teamName]={overs:{}};}if(!teamMap[teamName].overs[over]){teamMap[teamName].overs[over]=[];}teamMap[teamName].overs[over].push(ball);});setCommentaryByTeam(teamMap);cacheRef.current=teamMap;localStorage.setItem(cacheKey,JSON.stringify(teamMap));},[matchInfo]);if(!matchInfo)return/*#__PURE__*/_jsx(\"div\",{children:\"No commentary available at the moment.\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"commentary-tab\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Match Commentary\"}),Object.entries(commentaryByTeam).map(_ref2=>{let[teamName,teamData]=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"team-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:teamName}),Object.keys(teamData.overs).sort((a,b)=>b-a).map(over=>/*#__PURE__*/_jsxs(\"div\",{className:\"over-section\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[\"Over \",over]}),teamData.overs[over].map(ball=>{var _ball$bowler,_ball$bowler2,_ball$batsman,_ball$batsman2,_ball$score,_ball$score2,_ball$score3;return/*#__PURE__*/_jsxs(\"div\",{className:\"ball-line\",children:[/*#__PURE__*/_jsx(\"strong\",{children:ball.ball}),\":\",' ',(_ball$bowler=ball.bowler)===null||_ball$bowler===void 0?void 0:_ball$bowler.firstname,\" \",(_ball$bowler2=ball.bowler)===null||_ball$bowler2===void 0?void 0:_ball$bowler2.lastname,\" bowling to\",' ',(_ball$batsman=ball.batsman)===null||_ball$batsman===void 0?void 0:_ball$batsman.firstname,\" \",(_ball$batsman2=ball.batsman)===null||_ball$batsman2===void 0?void 0:_ball$batsman2.lastname,' ',(_ball$score=ball.score)===null||_ball$score===void 0?void 0:_ball$score.name,\" (\",(_ball$score2=ball.score)===null||_ball$score2===void 0?void 0:_ball$score2.runs,\" run\",((_ball$score3=ball.score)===null||_ball$score3===void 0?void 0:_ball$score3.runs)!==1?'s':'',\")\"]},ball.id);})]},over))]},teamName);})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","jsx","_jsx","jsxs","_jsxs","CommentaryTab","_ref","matchId","matchInfo","commentaryByTeam","setCommentaryByTeam","cacheKey","concat","cacheRef","_matchInfo$balls","cached","localStorage","getItem","parsed","JSON","parse","current","balls","length","teamMap","forEach","ball","_ball$team","teamName","team","name","over","Math","floor","overs","push","setItem","stringify","children","className","Object","entries","map","_ref2","teamData","keys","sort","a","b","_ball$bowler","_ball$bowler2","_ball$batsman","_ball$batsman2","_ball$score","_ball$score2","_ball$score3","bowler","firstname","lastname","batsman","score","runs","id"],"sources":["/Users/ashwin.r1/Downloads/live-cricket-scores-main/frontend/src/components/match/CommentaryTab.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\n\nexport default function CommentaryTab({ matchId, matchInfo }) {\n  const [commentaryByTeam, setCommentaryByTeam] = useState({});\n  const cacheKey = `commentary_${matchId}`;\n  const cacheRef = useRef({});\n\n  useEffect(() => {\n    const cached = localStorage.getItem(cacheKey);\n    if (cached) {\n      const parsed = JSON.parse(cached);\n      cacheRef.current = parsed;\n      setCommentaryByTeam(parsed);\n    }\n\n    if (!matchInfo?.balls?.length) return;\n\n    const teamMap = {};\n\n    matchInfo.balls.forEach((ball) => {\n      const teamName = ball.team?.name || 'Unknown Team';\n      const over = Math.floor(ball.ball) + 1;\n\n      if (!teamMap[teamName]) {\n        teamMap[teamName] = { overs: {} };\n      }\n\n      if (!teamMap[teamName].overs[over]) {\n        teamMap[teamName].overs[over] = [];\n      }\n\n      teamMap[teamName].overs[over].push(ball);\n    });\n\n    setCommentaryByTeam(teamMap);\n    cacheRef.current = teamMap;\n    localStorage.setItem(cacheKey, JSON.stringify(teamMap));\n  }, [matchInfo]);\n\n  if (!matchInfo) return <div>No commentary available at the moment.</div>;\n\n  return (\n    <div className=\"commentary-tab\">\n      <h3>Match Commentary</h3>\n      {Object.entries(commentaryByTeam).map(([teamName, teamData]) => (\n        <div key={teamName} className=\"team-section\">\n          <h4>{teamName}</h4>\n          {Object.keys(teamData.overs)\n            .sort((a, b) => b - a)\n            .map((over) => (\n              <div key={over} className=\"over-section\">\n                <strong>Over {over}</strong>\n                {teamData.overs[over].map((ball) => (\n                  <div key={ball.id} className=\"ball-line\">\n                    <strong>{ball.ball}</strong>:{' '}\n                    {ball.bowler?.firstname} {ball.bowler?.lastname} bowling to{' '}\n                    {ball.batsman?.firstname} {ball.batsman?.lastname}{' '}\n                    {ball.score?.name} ({ball.score?.runs} run{ball.score?.runs !== 1 ? 's' : ''})\n                  </div>\n                ))}\n              </div>\n            ))}\n        </div>\n      ))}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
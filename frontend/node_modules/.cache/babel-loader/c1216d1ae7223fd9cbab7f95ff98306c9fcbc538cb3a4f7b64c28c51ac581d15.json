{"ast":null,"code":"import React,{useEffect,useState,useMemo}from'react';import'./css/Rankings.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FORMATS=['TEST','ODI','T20I'];function pickEntry(data,gender,type){return(data||[]).find(x=>{var _x$gender,_x$type;return x.resource==='rankings'&&((_x$gender=x.gender)===null||_x$gender===void 0?void 0:_x$gender.toLowerCase())===gender.toLowerCase()&&((_x$type=x.type)===null||_x$type===void 0?void 0:_x$type.toUpperCase())===type.toUpperCase();});}function extractTop5(entry){return((entry===null||entry===void 0?void 0:entry.team)||[]).map(t=>{var _t$ranking,_t$ranking2;return{id:t.id,name:t.name,code:t.code,img:t.image_path,position:(_t$ranking=t.ranking)===null||_t$ranking===void 0?void 0:_t$ranking.position,rating:(_t$ranking2=t.ranking)===null||_t$ranking2===void 0?void 0:_t$ranking2.rating};}).sort((a,b)=>a.position-b.position).slice(0,5);}export default function Rankings(){const[data,setData]=useState([]);const[gender,setGender]=useState('men');const[loading,setLoading]=useState(true);useEffect(()=>{(async()=>{try{const res=await fetch('/api/team-rankings');const json=await res.json();setData(Array.isArray(json===null||json===void 0?void 0:json.data)?json.data:json);}catch(err){console.error('Failed to fetch team rankings',err);}finally{setLoading(false);}})();},[]);const top5Blocks=useMemo(()=>{return FORMATS.map(format=>{const entry=pickEntry(data,gender,format);const teams=extractTop5(entry);const updatedAt=entry!==null&&entry!==void 0&&entry.updated_at?new Date(entry.updated_at).toLocaleDateString('en-GB'):null;return{format,teams,updatedAt};});},[data,gender]);return/*#__PURE__*/_jsxs(\"div\",{className:\"top5-container\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/rankings\",className:\"see-all-btn-floating\",children:\"All\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"rankings-title\",children:\"ICC Team Rankings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"top5-tabs\",children:['men','women'].map(g=>/*#__PURE__*/_jsx(\"button\",{className:\"top5-tab \".concat(gender===g?'active':''),onClick:()=>setGender(g),children:g==='men'?'Men':'Women'},g))}),/*#__PURE__*/_jsx(\"div\",{className:\"top5-grid\",children:top5Blocks.map(_ref=>{let{format,teams,updatedAt}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"top5-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"top5-card-header\",children:/*#__PURE__*/_jsx(\"span\",{className:\"top5-format\",children:format})}),teams.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"top5-list\",children:teams.map(team=>/*#__PURE__*/_jsxs(\"div\",{className:\"top5-team-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"top5-rank\",children:team.position}),/*#__PURE__*/_jsxs(\"div\",{className:\"top5-team-info\",children:[/*#__PURE__*/_jsx(\"img\",{src:team.img,alt:team.name,className:\"top5-flag\"}),/*#__PURE__*/_jsx(\"span\",{className:\"top5-team-name\",children:team.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"top5-team-code\",children:[\"(\",team.code,\")\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"top5-rating\",children:team.rating})]},team.id))}):/*#__PURE__*/_jsx(\"div\",{className:\"top5-no-data\",children:\"No ranking data available\"})]},format);})})]});}","map":{"version":3,"names":["React","useEffect","useState","useMemo","jsx","_jsx","jsxs","_jsxs","FORMATS","pickEntry","data","gender","type","find","x","_x$gender","_x$type","resource","toLowerCase","toUpperCase","extractTop5","entry","team","map","t","_t$ranking","_t$ranking2","id","name","code","img","image_path","position","ranking","rating","sort","a","b","slice","Rankings","setData","setGender","loading","setLoading","res","fetch","json","Array","isArray","err","console","error","top5Blocks","format","teams","updatedAt","updated_at","Date","toLocaleDateString","className","children","href","g","concat","onClick","_ref","length","src","alt"],"sources":["/Users/ashwin.r1/Downloads/live-cricket-scores-main/frontend/src/components/home/Rankings.js"],"sourcesContent":["import React, { useEffect, useState, useMemo } from 'react';\nimport './css/Rankings.css';\n\nconst FORMATS = ['TEST', 'ODI', 'T20I'];\n\nfunction pickEntry(data, gender, type) {\n  return (data || []).find(\n    (x) =>\n      x.resource === 'rankings' &&\n      x.gender?.toLowerCase() === gender.toLowerCase() &&\n      x.type?.toUpperCase() === type.toUpperCase()\n  );\n}\n\nfunction extractTop5(entry) {\n  return (entry?.team || [])\n    .map((t) => ({\n      id: t.id,\n      name: t.name,\n      code: t.code,\n      img: t.image_path,\n      position: t.ranking?.position,\n      rating: t.ranking?.rating,\n    }))\n    .sort((a, b) => a.position - b.position)\n    .slice(0, 5);\n}\n\nexport default function Rankings() {\n  const [data, setData] = useState([]);\n  const [gender, setGender] = useState('men');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const res = await fetch('/api/team-rankings');\n        const json = await res.json();\n        setData(Array.isArray(json?.data) ? json.data : json);\n      } catch (err) {\n        console.error('Failed to fetch team rankings', err);\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, []);\n\n  const top5Blocks = useMemo(() => {\n    return FORMATS.map((format) => {\n      const entry = pickEntry(data, gender, format);\n      const teams = extractTop5(entry);\n      const updatedAt = entry?.updated_at ? new Date(entry.updated_at).toLocaleDateString('en-GB') : null;\n      return { format, teams, updatedAt };\n    });\n  }, [data, gender]);\n\n  return (\n    <div className=\"top5-container\">\n      <a href=\"/rankings\" className=\"see-all-btn-floating\">All</a>\n      <h2 className=\"rankings-title\">ICC Team Rankings</h2>\n\n      <div className=\"top5-tabs\">\n        {['men', 'women'].map((g) => (\n          <button\n            key={g}\n            className={`top5-tab ${gender === g ? 'active' : ''}`}\n            onClick={() => setGender(g)}\n          >\n            {g === 'men' ? 'Men' : 'Women'}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"top5-grid\">\n        {top5Blocks.map(({ format, teams, updatedAt }) => (\n          <div key={format} className=\"top5-card\">\n            <div className=\"top5-card-header\">\n              <span className=\"top5-format\">{format}</span>\n            </div>\n\n            {teams.length > 0 ? (\n              <div className=\"top5-list\">\n                {teams.map((team) => (\n                  <div key={team.id} className=\"top5-team-row\">\n                    <div className=\"top5-rank\">{team.position}</div>\n                    <div className=\"top5-team-info\">\n                      <img src={team.img} alt={team.name} className=\"top5-flag\" />\n                      <span className=\"top5-team-name\">{team.name}</span>\n                      <span className=\"top5-team-code\">({team.code})</span>\n                    </div>\n                    <div className=\"top5-rating\">{team.rating}</div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"top5-no-data\">No ranking data available</div>\n            )}\n\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}